\chapter{\ifcpe ทฤษฎีที่เกี่ยวข้อง\else Background Knowledge and Theory\fi}

การทำโครงงานนี้เริ่มต้นจากการที่เราเล็งเห็นปัญหาของตารางสอบปลายภาคมหาวิทยาลัยเชียงใหม่ในปัจจุบันซึ่งอาจจะสามารถแปลงเป็นปัญหาที่มีวิธีแก้ไขมาแล้วได้ เราจึงเริ่มต้นศึกษาค้นคว้าทฤษฎีที่เกี่ยวข้องที่สามารถแก้ไขปัญหานี้ได้หรือ งานวิจัย โครงงาน ที่เคยมีผู้นำเสนอไว้แล้ว
ซึ่งเนื้อหาในบทนี้ก็จะเกี่ยวกับการอธิบายถึงสิ่งที่เกี่ยวข้องกับโครงงานนี้้เพื่อให้ผู้อ่านเข้าใจเนื้อหาในบทถัด ๆ ไปได้ง่ายยิ่งขึ้น
\section{Literature review}
การกำหนดเวลาสอบปลายภาคเพื่อหลีกเลี่ยงปัญหานักศึกษาคนใด ๆ มีเวลาสอบในช่วงเวลาเดียวกันสามารถแปลงปัญหานี้ให้เป็นปัญหา graph coloring~\cite{mcs} ได้ 
โดยที่จุดแต่ละจุดในกราฟเป็นรายวิชาที่เปิดสอนในภาคการศึกษานั้น 
และเส้นที่เชื่อมแต่ละจุดสองจุดในกราฟแสดงถึงการมีนักศึกษาที่ลงทะเบียนเรียนทั้งสองรายวิชา โดยจุดสองจุดใด ๆ ในกราฟที่มีเส้นเชื่อมกันจะถูกกำหนดสีให้ต่างกัน
ซึ่งแสดงถึงวันและเวลาที่จัดสอบปลายภาคในวิชานั้น ๆ โดยจุดที่มีคนละสีก็จะถูกจัดให้สอบคนละช่วงเวลากัน

การแปลงปัญหาการจัดตารางสอบปลายภาคให้เป็นปัญหา graph coloring จะสามารถแก้ปัญหาการจัดตารางสอบแบบพื้นฐานได้เท่านั้น โดยไม่คำนึงถึงข้อจำกัดอย่างอื่น 
ตัวอย่างเช่น ไม่พิจารณาความจุที่นั่งสำหรับการสอบแต่ละช่วงเวลาของนักศึกษา จำนวนอาจารย์ที่คุมสอบแต่ละช่วงเวลา และการกระจายวิชาสอบสำหรับนักศึกษาแต่ละคน เป็นต้น
ถึงแม้จะไม่กำหนดข้อจำกัดใด ๆ ปัญหา graph coloring ก็เป็นปัญหา NP-complete ด้วยตัวมันเองอยู่แล้ว~\cite{alg-design} 
ซึ่งหมายความว่ายังไม่สามารถหาอัลกอริทึมที่ใช้เวลา polynomial-time ในการแก้ไขปัญหาให้ได้ผลลัพธ์ที่เหมาะสมที่สุด 
ทำให้ต้องใช้วิธีอื่นที่ให้ผลลัพธ์ที่ดีในระดับที่ยอมรับได้ แต่สามารถยืนยันได้ว่าจะได้วิธีการที่สามารถแก้ไขปัญหาได้อย่างแน่นอน 
ซึ่งวิธีการนั้นคือ metaheuristic ซึ่งสามารถหาวิธีการแก้ปัญหาที่ดีได้ในระยะเวลาที่เหมาะสม~\cite{meta-for-vertexcolor}
และสามารถกำหนดข้อจำกัดหรือเงื่อนไขอื่นเพิ่มเติมได้ ทำให้สามารถกำหนดขอบเขตของผลลัพธ์ได้ แต่อาจจะไม่ได้วิธีแก้ปัญหาที่ดีที่สุด

อีกวิธีการที่สามารถใช้แก้ไขปัญหาการจัดตารางสอบได้ก็คือการใช้ memetic algorithms (MA) ซึ่งเป็นวิธีการที่นำ local search มาประยุกต์ใช้กับ genetic algorithm 
เพื่อช่วยลดระยะเวลาให้คำตอบของปัญหานั้น converge ช้าลง \cite{pablo-memetic-algo} ซึ่ง Ender {\"O}zcan เคยได้นำวิธีการนี้มาประยุกต์ใช้ในการแก้ปัญหาการจัดตารางสอบ 
โดยได้สร้าง Framework สำหรับออกแบบตัวดำเนินการที่ใช้ในการ crossover และ mutation ของ genetic algorithm ด้วย~\cite{fes}
โดยในการทดลองนี้ได้มีการคำนึงถึงนักศึกษา โดยกำหนดข้อจำกัดของตารางสอบที่ได้ให้ไม่มีนักศึกษาที่ต้องสอบติดกันสองวิชาในแต่ละวัน แต่การจัดตารางสอบในแบบของ Ender 
นั้นเป็นการจัดตารางสอบของมหาวิทยาลัย Yeditepe โดยแบ่งตารางสอบเป็นของภาควิชาต่าง ๆ และแบ่งย่อยแยกตามสาขาวิชาอีกที วิธีการนี้ไม่สามารถนำมาใช้กับการจัดตารางสอบของมหาวิทยาลัยเชียงใหม่ได้
เนื่องจากมหาวิทยาลัยเชียงใหม่ มีวิชาศึกษาทั่วไปซึ่งเป็นวิชาที่เปิดให้นักศึกษาจากต่างคณะสามารถลงทะเบียนได้ทำให้มีนักศึกษาเป็นจำนวนมากกว่าที่ความจุที่นั่งสอบของคณะนั้นจะรับไหว
ซึ่งทำให้การจัดตารางสอบโดยใช้วิธีนี้นั้นเป็นไปได้ยากเพราะจำนวนนักศึกษาที่เกินความจุที่นั่งสอบนั้นจะละเมิดข้อจำกัดที่กำหนดไว้ 
\section{Tools}
\subsection{Gurobi Optimizer}
Gurobi Optimizer เป็น Solver ที่ใช้สำหรับแก้ปัญหา optimization โดยที่จะเน้นไปทางด้านของปัญหาต่าง ๆ ดังนี้ 
\begin{itemize}
  \item Linear programming (LP)
  \item Mixed-integer linear programming (MILP)
  \item Quadratic programming (QP)
  \item Mixed-integer quadratic programming (MIQP)
  \item Quadratically-constrained programming (QCP)
  \item Mixed-integer quadratically-constrained programming (MIQCP)
\end{itemize}
ผลลัพธ์ที่ได้จาก Gurobi Optimizer อาจนำมาใช้เป็นตัวเปรียบเทียบประสิทธิภาพกับผลลัพธ์การทำงานที่ได้จากอัลกอลิทึมของเรา

\section{Algorithm}
\subsection{Metaheuristic}
Meta­heuristic \cite{metaheuris} เรียกได้ว่าเป็นหลักการการแก้ไขปัญหาโดยทั่วไปและยังสามารถหาผลลัพธ์ของ optimization problems ได้อย่างเหมาะสม
หลักการแก้ไขปัญหาเหล่านี้นั้นจะเป็นการลอกเลียนหลักการของธรรมชาติและนำมาแปลงเป็นอัลกอริทึม อย่างเช่น genetic algorithm, evolutionary computation, simulated annealing, tabu search เป็นต้น
\subsection{Genetic algorithms}
Genetic algorithm \cite{GA} เป็นหนึ่งใน metaheuristic ซึ่งเป็นเทคนิคสำหรับค้นหาผลลัพธ์หรือคำตอบโดยประมาณของปัญหา โดยอาศัยหลักการจากทฤษฎีวิวัฒนาการจากชีววิทยาและหลักการคัดเลือกตามธรรมชาตินั่นคือ 
สิ่งมีชีวิตที่เหมาะสมที่สุดจึงจะอยู่รอด กระบวนการคัดเลือกได้เปลี่ยนแปลงสิ่งมีชีวิตให้เหมาะสมยิ่งขึ้นด้วยตัวปฏิบัติการทางพันธุกรรม เช่น การสืบพันธุ์ , การแลกเปลี่ยนยีน , การกลายพันธุ์  


โดยขั้นตอนการทำงานของ genetic algorithm มีดังนี้ 
\begin{enumerate}
  \item initial population เป็นขั้นตอนการเริ่มต้นอัลกอริทึมด้วยการกำหนดชุดข้อมูลผลลัพธ์ที่ควรจะได้จากการแก้ไขปัญหาซึ่งเรียกชุดข้อมูลนี้ว่า chromosome ข้อมูลนี้อาจจะสุ่มขึ้นมาโดยที่ให้ข้อมูลแต่ละ bit เป็นข้อมูล 0,1 เรียกข้อมูล bit นี้ว่า genes และนำ genes มาต่อกันเป็นสาย chromosome 
  \item fitness function จะเป็น function สำหรับการคัดเลือก chromosome หรือ ข้อมูลที่เหมาะสมให้สามารถอยู่ต่อไปได้ซึ่งจะใช้ fitness scores เป็นเกณฑ์ในการคัดเลือกข้อมูลที่เหมาะสม
  โดยค่า fitness scores จะขึ้นอยู่กับผลลัพธ์ทของอัลกอริทึมควรจะเป็น
  \item genetic operator คือวิธีการในการปรับเปลี่ยนรูปแบบโครงสร้างของชุดข้อมูลที่เหมาะสมสำหรับรุ่นถัดไปซึ่งก็มีวิธีการทำอยู่ 3 แบบหลัก ๆ 
  \begin{itemize}
  \item selection เป็นการเลือกข้อมูลที่เหมาะสมแล้วปล่อยข้อมูลนั้นส่งต่อข้อมูลไปยังรุ่นถัดไป โดยจะเลือกข้อมูลจาก fitness scores
  \item crossover เป็นการสุ่มเลือกข้อมูลแต่ละ bit จากชุดข้อมูลสองตัวเพื่อส่งต่อไปยังรุ่นต่อไป
  \item mutation เป็นการสุ่มข้อมูลบาง bit ของชุดข้อมูลให้มีค่าของข้อมูลตรงข้ามกลับค่าเดิม
\end{itemize}
\end{enumerate}
อัลกอริทึม genetic algorithm สามารถจบการทำงานได้หลายวิธี โดยมีเงื่อนไขจบการทำงานดังนี้
\begin{itemize}
  \item จบการทำงานเมื่อชุดข้อมูลที่เหมาะสมถึงรุ่นที่ต้องการ 
  \item จบการทำงานเมื่อชุดข้อมูลที่เหมาะสมไม่มีการพัฒนาแล้วหรือไม่มีการเปลี่ยนแปลงไปในทางที่ดีขึ้นเป็นเวลานาน
  \item จบการทำงานเมื่อ fitness scores ของชุดข้อมูลที่เหมาะสมถึงค่าที่ต้องการ
\end{itemize}


\section{\ifcpe%
ความรู้ตามหลักสูตรซึ่งถูกนำมาใช้หรือบูรณาการในโครงงาน
\else%
ISNE knowledge used, applied, or integrated in this project
\fi
}

อธิบายถึงความรู้ และแนวทางการนำความรู้ต่างๆ ที่ได้เรียนตามหลักสูตร ซึ่งถูกนำมาใช้ในโครงงาน

\section{\ifcpe%
ความรู้นอกหลักสูตรซึ่งถูกนำมาใช้หรือบูรณาการในโครงงาน
\else%
Extracurricular knowledge used, applied, or integrated in this project
\fi
}

อธิบายถึงความรู้ต่างๆ ที่เรียนรู้ด้วยตนเอง และแนวทางการนำความรู้เหล่านั้นมาใช้ในโครงงาน
